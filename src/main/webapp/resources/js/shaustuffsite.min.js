var form3d=function(){var e=function(){var e={width:900,height:600,params:{enableDebugging:"0"}},r=new UnityObject2(e);r.observeProgress(function(e){var n=jQuery(e.targetEl).find(".missing");switch(e.pluginStatus){case"unsupported":showUnsupported();break;case"broken":alert("You will need to restart your browser after installation.");break;case"missing":n.find("a").click(function(e){return e.stopPropagation(),e.preventDefault(),r.installPlugin(),!1}),n.show();break;case"installed":n.remove();break;case"first":}}),r.initPlugin(jQuery("#unityPlayer")[0],"/unity/Form3D_Release_1_2.unity3d")};return{initForm3d:e}}();
var shaugeometry=function(){var t,n,e=1,r=8,o=0,i=0,u=0,c=0,a=[],f=function(e,r){t=e,n=r,s()},s=function(){a=[]},g=function(t,n,e,r){o=t,i=n,u=e,c=r;for(var f=a.length,s=0;f>s;s++)a[s].changeBounds()},h=function(){return a},p=function(t,n){var e=null,r=new d;r.setMapPosition(n,t);for(var o=r.getScreenX(),i=r.getScreenY(),u=a.length,c=0;u>c;c++)if(a[c].hitTest(o,i)){e=a[c];break}return e},M=function(t,n,e,r){var o=P(n,e),i=new S;i.createMapPoint(o[0],o[1]),i.setMetadata(r),a.push(i)},P=function(t,n){for(var e=[t,n],r=a.length,o=0;r>o;o++){var i=a[o].getVertices();t==i.getMapX()&&n==i.getMapY()&&(e=P(t,parseFloat(n)+parseFloat(3e-4)))}return e},S=function(){var t,n,o=e,i=function(){return o},u=function(){return t},c=function(t){n=t},a=function(){return n},f=function(n,e){t=new d,t.setScreenPosition(n,e)},s=function(n,e){t=new d,t.setMapPosition(n,e)},g=function(n,e){return t.hitTest(n,e,r)},h=function(){t.boundsChanged()};return{getGeometryType:i,getVertices:u,setMetadata:c,getMetadata:a,createScreenPoint:f,createMapPoint:s,hitTest:g,changeBounds:h}},d=function(){var e=0,r=0,a=0,f=0,s=function(s,g){e=s,r=g,a=o+e/t*(i-o),f=u+(n-r)/n*(c-u)},g=function(s,g){a=s,f=g,e=(a-o)/(i-o)*t,r=n-(f-u)/(c-u)*n},h=function(){e=(a-o)/(i-o)*t,r=n-(f-u)/(c-u)*n},p=function(t,n,o){return t>e-o&&e+o>t&&n>r-o&&r+o>n?!0:!1},M=function(){return e},P=function(){return r},S=function(){return a},d=function(){return f},v=function(t){e=t},l=function(t){r=t},T=function(t){a=t},X=function(t){f=t};return{setScreenPosition:s,setMapPosition:g,boundsChanged:h,hitTest:p,getScreenX:M,getScreenY:P,getMapX:S,getMapY:d,setScreenX:v,setScreenY:l,setMapX:T,setMapY:X}};return{init:f,clearGeometry:s,setCurrentBounds:g,getPointGeometries:h,hitTest:p,createPoint:M,ShauPoint:S,ShauVertex:d}}();
var shaujuliaset=function(){var a=300,t=1,e=10,o=1,r=100,i=1,l=function(){u(),v()},n=function(){i-=t,o>i&&(i=o),u(),v()},d=function(){i-=e,o>i&&(i=o),u(),v()},s=function(){i+=t,i>r&&(i=r),u(),v()},m=function(){i+=e,i>r&&(i=r),u(),v()},u=function(){$("#currentzoom").text(i),$("#smallzoomout").removeAttr("disabled"),$("#largezoomout").removeAttr("disabled"),$("#smallzoomin").removeAttr("disabled"),$("#largezoomin").removeAttr("disabled"),1===i&&($("#smallzoomout").attr("disabled","disabled"),$("#largezoomout").attr("disabled","disabled")),100===i&&($("#smallzoomin").attr("disabled","disabled"),$("#largezoomin").attr("disabled","disabled"))},v=function(){var t=$("#juliasetwrapper").width(),e=parseInt(t/1.333),o=$("#shauJuliaSetCanvas")[0];o.width=t,o.height=e;var r,l,n=o.getContext("2d"),d=n.createImageData(o.width,o.height),s=d.width,m=d.height;r=-.7,l=.27015;for(var u=0,v=0,b=0,g=0,h=0;m>h;h++)for(var c=0;s>c;c++){u=1.5*(c-s/2)/(.5*i*s),v=(h-m/2)/(.5*i*m);var z=0;for(z=0;a>z&&(b=u,g=v,u=b*b-g*g+r,v=2*b*g+l,!(u*u+v*v>4));z++);var I=[0,0,0];if(a>z){var p=z%256/256,w=f(p,1,p);I[0]=parseInt(127*w[0]),I[1]=parseInt(127*w[1]),I[2]=parseInt(127*w[2])}var A=4*(c+h*s);d.data[A+0]=I[0],d.data[A+1]=I[1],d.data[A+2]=I[2],d.data[A+3]=255}n.putImageData(d,0,0)},f=function(a,t,e){var o=e,r=e,i=e;if(0!==t){var l=e,n=e*t,d=e-n,s=360*a;60>s?(o=l,r=s*n/60+d,i=d):120>s?(o=-(s-120)*n/60+d,r=l,i=d):180>s?(o=d,r=l,i=(s-120)*n/60+d):240>s?(o=d,r=-(s-240)*n/60+d,i=l):300>s?(o=(s-240)*n/60+d,r=d,i=l):360>=s?(o=l,r=d,i=-(s-360)*n/60+d):(o=0,r=0,i=0)}return[o,r,i]};return{initJuliaSet:l,smallZoomOut:n,largeZoomOut:d,smallZoomIn:s,largeZoomIn:m}}();
var shaulinks=function(){var a,e=5,i=0,l=0,n=function(){$.ajax({type:"GET",url:"/loadlinks",dataType:"json",timeout:3e5,success:function(a){s(a),r(1)},error:function(a){alert("ERROR: ",a)},done:function(a){alert("DONE")}})},s=function(n){a=n,i=n.length,l=parseInt(i/e),i/e>l&&(l+=1)},r=function(l){for(var n="",s=e*(l-1),r=s+e,c=s;r>c;c++)if(i>c){var u=a[c];n+=u.embeddedLink?d(u):o(u)}$("#linkscontainer").html(n),t(l)},t=function(a){var e="<nav><ul class='pagination'>";e+=1===a?"<li id='pagePrevious' class='disabled'><a href='#' aria-label='Previous'><span aria-hidden='true'>&laquo;</span></a></li>":"<li id='pagePrevious'><a href='#' aria-label='Previous' onclick='shaulinks.loadPage("+(a-1)+");'><span aria-hidden='true'>&laquo;</span></a></li>";for(var i=0;l>i;i++)e+=a===i+1?"<li class='active' id='page"+(i+1)+"'><a href='#' onclick='shaulinks.loadPage("+(i+1)+");'>"+(i+1)+"</a></li>":"<li id='page"+(i+1)+"'><a href='#' onclick='shaulinks.loadPage("+(i+1)+");'>"+(i+1)+"</a></li>";e+=a===l?"<li id='pageNext' class='disabled'><a href='#' aria-label='Next'><span aria-hidden='true'>&raquo;</span></a></li>":"<li id='pageNext'><a href='#' aria-label='Next' onclick='shaulinks.loadPage("+(a+1)+");'><span aria-hidden='true'>&raquo;</span></a></li>",e+="</ul></nav>",$("#paginationcontainer").html(e)},o=function(a){var e='<div class="panel panel-default">';return e+='<div class="panel-heading">',e+=a.title,e+="</div>",e+='<div class="panel-body">',e+='<p class="text-center">',e+=a.prose,e+="</p>",e+='<p class="text-center">',e=e+'<a href="#" onclick="window.open(\''+a.linkUrl+'\');" class="shaulink" >',e+=a.linkText,e+="</a>",e+="</p>",e+="</div>",e+="</div>"},d=function(a){var e='<div class="panel panel-default">';return e+='<div class="panel-heading">',e+=a.title,e+="</div>",e+='<div class="panel-body">',e+='<p class="text-center">',e+=a.prose,e+="</p>",e+='<iframe width="100%" height="450" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/73786781&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true">',e+="</iframe>",e+="</div>",e+="</div>"};return n(),{loadPage:r}}();
var shauslider=function(){var e,t,a,n,i=15,r=10,s=620,g=420,o=40,f=40,d=10,h=1e4,m=function(){l();var e=["/images/IMG_0103.JPG","/images/cat.JPG","/images/anothercat.JPG","/images/IMG_0036.JPG","/images/CIMG0310.JPG","/images/CIMG0702.JPG","/images/CIMG0715.JPG","/images/CIMG0707.JPG","/images/CIMG0726.JPG","/images/IMG_0033.JPG","/images/20141225_105801.JPG"];t=new y;for(var a=0;a<e.length;a++){var n=new Image;n.src=e[a],n.onload=function(){t.loadImage(this)}}},l=function(){var e=parseInt(.8*$("#home-panel-body").width()),t=parseInt(e/1.333),a=parseInt(e/i),n=parseInt(a/4);o=4*n,s=o*i;var d=parseInt(t/r);n=parseInt(d/4),f=4*n,g=f*r,document.getElementById("shauSlideshowCanvas").width=s,document.getElementById("shauSlideshowCanvas").height=g},u=function(){clearTimeout(a)},c=function(){e=0,I(t.getCurrentSlideshowImage()),C(t.getNextSlideshowImage());var a=t.getNextTransitionIndex();0===a?S():1===a?O():2===a?(n=0,p()):3===a?v():4===a?w():5===a&&x()},I=function(e){t.getOffscreenFromCtx().fillRect(0,0,s,g),t.getOffscreenFromCtx().drawImage(e.getImg(),e.getDisplayLeft(),e.getDisplayTop(),e.getDisplayWidth(),e.getDisplayHeight())},C=function(e){t.getOffscreenCtx().fillRect(0,0,s,g),t.getOffscreenCtx().drawImage(e.getImg(),e.getDisplayLeft(),e.getDisplayTop(),e.getDisplayWidth(),e.getDisplayHeight())},w=function(){var n,i,r,o,f;if(e>0)if(s>e){for(o=t.getSlideshowCtx().getImageData(0,0,s,g),f=o.data,n=0;g>n;n++)for(i=0;s>i;i++)r=255,e>i&&(r-=63),i>s-e&&(r-=63),e>n&&(r-=63),n>g-e&&(r-=63),f[n*s*4+4*i+3]=r;t.getSlideshowCtx().putImageData(o,0,0)}else{for(o=t.getOffscreenCtx().getImageData(0,0,s,g),f=o.data,n=0;g>n;n++)for(i=0;s>i;i++)r=0,e-s>i&&(r+=63),i>s-(e-s)&&(r+=63),e-s>n&&(r+=63),n>g-(e-s)&&(r+=63),f[n*s*4+4*i+3]=r;t.getSlideshowCtx().putImageData(o,0,0)}e+=10,s+s>e?a=setTimeout(w,10):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},v=function(){for(var n=o/2,r=0;i>r;r++)t.getSlideshowCtx().fillRect(r*o+d,0,o,g),n>e?t.getSlideshowCtx().drawImage(t.getOffscreenFromCanvas(),r*o+d,0,o,g,r*o+e+d,0,o-e-e,g):t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),r*o+d,0,o,g,r*o+(o-e)+d,0,o-(o-e)-(o-e),g);e++,o+1>e?a=setTimeout(v,40):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},x=function(){for(var n=f/2,i=0;r>i;i++)t.getSlideshowCtx().fillRect(0,i*f+d,s,f),n>e?t.getSlideshowCtx().drawImage(t.getOffscreenFromCanvas(),0,i*f+d,s,f,0,i*f+e+d,s,f-e-e):t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,i*f+d,s,f,0,i*f+(f-e)+d,s,f-(f-e)-(f-e));e++,f+1>e?a=setTimeout(x,40):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},p=function(){var s=e;e>=o+1&&(s=e%(o+1),0===s&&(n+=1));for(var g=o/2,d=0;r+1>d;d++)for(var m=0;i>m;m++)n==d&&(t.getSlideshowCtx().fillRect(m*o,d*f,o,f),g>s?t.getSlideshowCtx().drawImage(t.getOffscreenFromCanvas(),m*o,d*f,o,f,m*o+s,d*f,o-s-s,f):t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),m*o,d*f,o,f,m*o+(o-s),d*f,o-(o-s)-(o-s),f));e++,500>e?a=setTimeout(p,10):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},S=function(){if(e>0)for(var n=0;r>n;n++)n%2===0?t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,f*n,s,f,e-s,f*n,s,f):t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,f*n,s,f,s-e,f*n,s,f);e+=2,s>e?a=setTimeout(S,10):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},O=function(){if(e>0)for(var n=0;i>n;n++)n%2===0?t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),o*n,0,o,g,o*n,e-g,o,g):t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),o*n,0,o,g,o*n,g-e,o,g);e+=2,g>e?a=setTimeout(O,10):(t.getSlideshowCtx().drawImage(t.getOffscreenCanvas(),0,0),a=setTimeout(c,h))},y=function(){var e=document.createElement("canvas");e.width=s,e.height=g;var t=e.getContext("2d"),n=document.createElement("canvas");n.width=s,n.height=g;var i,r,o=n.getContext("2d"),f=[],d=document.getElementById("shauSlideshowCanvas"),m=d.getContext("2d");this.loadImage=function(e){var t=new T;t.initImage(e),f.push(t),1===f.length&&this.loadFirstImage()},this.getCurrentSlideshowImage=function(){return f[i]},this.getNextSlideshowImage=function(){for(var e=Math.floor(Math.random()*f.length);e==i;)e=Math.floor(Math.random()*f.length);return i=e,f[e]},this.getNextTransitionIndex=function(){for(var e=Math.floor(6*Math.random());e==r;)e=Math.floor(6*Math.random());return 6===e&&(e=5),r=e,e},this.getSlideshowCtx=function(){return m},this.getOffscreenCtx=function(){return t},this.getOffscreenFromCtx=function(){return o},this.getOffscreenCanvas=function(){return e},this.getOffscreenFromCanvas=function(){return n},this.loadFirstImage=function(){i=0;var e=f[0];m.fillStyle="rgba(0, 0, 0, 1)",m.fillRect(0,0,s,g),m.drawImage(e.getImg(),e.getDisplayLeft(),e.getDisplayTop(),e.getDisplayWidth(),e.getDisplayHeight()),a=setTimeout(c,h)}},T=function(){var e,t,a,n,i,r,o,f=function(f){e=f,t=e.width,a=e.height;var h=t/a;h>1?(n=s-d-d,i=parseInt(n/h),r=d,o=parseInt((g-i)/2),i>g-d-d&&(i=g-d-d,n=parseInt(i*h),o=d,r=parseInt((s-n)/2))):(i=g-d-d,n=parseInt(i*h),o=d,r=parseInt((s-n)/2))},h=function(){return e},m=function(){return t},l=function(){return a},u=function(){return n},c=function(){return i},I=function(){return o},C=function(){return r};return{initImage:f,getImg:h,getImgWidth:m,getImgHeight:l,getDisplayWidth:u,getDisplayHeight:c,getDisplayTop:I,getDisplayLeft:C}};return{initSlideshow:m,stopSlideshowThread:u}}();
var shaumap=function(){var t,e,n,i,a=[],o=!1,r=function(){v();var n=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transport",elementType:"labels",stylers:[{visibility:"off"}]}],i={scaleControl:!0,streetViewControl:!1,keyboardShortcuts:!1,center:{lat:51.5072,lng:.1275},zoom:16,styles:n};t=document.getElementById("map-div"),e=new google.maps.Map(t,i),google.maps.event.addListener(e,"idle",s)},s=function(){o||c()},c=function(){var t=e.getBounds(),n=t.getSouthWest().lng(),i=t.getSouthWest().lat(),a=t.getNorthEast().lng(),o=t.getNorthEast().lat(),r="/kml/Train%20Station/Bus%20Stop/Hail%20and%20Ride/River%20Boat/Tube%20Station/query?BBOX=";r=r+n+","+i+","+a+","+o,$.ajax({type:"GET",url:r,dataType:"xml",timeout:3e5,success:function(t){u(),$(t).find("kml Document Placemark").each(function(){var t=$(this).find("name").text(),e=$(this).find("coordinates").text(),n=e.split(","),i=p(n[0],n[1]),a=new m;a.setGeometryId(t),a.setLat(i[0]),a.setLng(i[1]);$(this).find("ExtendedData Data").each(function(){var t=$(this).attr("name");"stopType"==t?a.setStopType($(this).text()):"stopName"==t?a.setStopName($(this).text()):"stopRoute"==t?a.setStopRoute($(this).text()):"stopId"==t&&a.setStopId($(this).text())});l(i[0],i[1],a)})},error:function(t){alert("ERROR: ",t)},done:function(t){alert("DONE")}})},l=function(t,n,i){var r=new google.maps.LatLng(t,n),s="/images/"+i.getIconKey(),c=new google.maps.Marker({position:r,icon:s}),l="<div class='iwcontainer'><div class='iwtitle'><a class='iwtitlelink' href='#' onclick='window.open(\""+i.getLinkUrl()+"\");' ><b>"+i.getStopName()+"</b></a></div><p class='text-center'><a class='iwcontentlink' href='#' onclick='window.open(\""+i.getLinkUrl()+"\");'>"+i.getStopRoute()+"</a></p></div>",p=new google.maps.InfoWindow({content:l});c.addListener("click",function(){o=!0,setTimeout(function(){o=!1},1e3),p.open(e,c)}),google.maps.event.addListener(p,"domready",function(){var t=$(".gm-style-iw"),e=t.prev();e.children(":nth-child(2)").css({display:"none"}),e.children(":nth-child(4)").css({display:"none"}),e.children(":nth-child(3)").find("div").children().css({"background-color":"black","z-index":"1"});var n=t.next();n.css({left:"200px",top:"22px"})}),c.setMap(e),i.setMarker(c),a.push(i)},p=function(t,e){for(var n=[t,e],i=a.length,o=0;i>o;o++)a[o].getLat()==t&&a[o].getLng()==e&&(n=p(parseFloat(t)+parseFloat(15e-5),e));return n},u=function(){for(;a.length;)a.pop().getMarker().setMap(null)},d=function(){var t=$("#searchParameter").val();if(null!==t&&t.length>0){var e="/kml/Train%20Station/Bus%20Stop/Hail%20and%20Ride/River%20Boat/Tube%20Station/query?SEARCH_PARAMETER="+encodeURIComponent(t);$.ajax({type:"GET",url:e,dataType:"xml",timeout:3e5,success:function(t){i=[],$(t).find("kml Document Placemark").each(function(){var t=$(this).find("name").text(),e=$(this).find("coordinates").text(),n=e.split(","),a=new m;a.setGeometryId(t);var o=($(this).find("ExtendedData Data").each(function(){var t=$(this).attr("name");"stopType"==t?a.setStopType($(this).text()):"stopName"==t?a.setStopName($(this).text()):"stopRoute"==t?a.setStopRoute($(this).text()):"stopId"==t&&a.setStopId($(this).text())}),new shaugeometry.ShauPoint);o.createMapPoint(n[1],n[0]),o.setMetadata(a),i.push(o)}),g()},error:function(t){alert("ERROR: ",t)},done:function(t){alert("DONE")}})}},g=function(){var t=i.length;if(t>0){var e="";$("#shauresultsrows").css("height",""),$("#shauresultsrows").css("overflow-y","");for(var n=0;t>n;n++){var a=i[n],o=a.getVertices();e+='<div class="shauresultsrow">',e=e+'<input type="button" value="Find" class="btn btn-primary btn-sm" onclick="shaumap.findOnMap('+o.getMapY()+","+o.getMapX()+');"></input> &nbsp;',e=e+'<img src="/images/'+a.getMetadata().getIconKey()+'"/> &nbsp;',e+=a.getMetadata().getStopName(),e+="</div>"}$("#shauresultsrows").html(e),t>10&&($("#shauresultsrows").css("height","500px"),$("#shauresultsrows").css("overflow-y","scroll"));var r="350px",s=$("#map-div").width();410>s&&(r=parseInt(s-60)+"px"),$("#shausearchresults").width(r),$("#shausearchresults").css("display","block")}},h=function(){$("#shausearchresults").css("display","none")},f=function(t,n){e.setCenter(new google.maps.LatLng(t,n)),e.setZoom(17),h()},m=function(){var t,e,n,i,a,o,r="",s="",c=function(){return t},l=function(e){t=e},p=function(){return e},u=function(t){e=t},d=function(){return n},g=function(t){n=t},h=function(){return i},f=function(t){i=t},m=function(){return a},v=function(t){a=t},y=function(){return r},S=function(t){r=t},b=function(){return"Train Station"==a?"National Rail":s},w=function(t){s=t},_=function(){return o},k=function(t){o=t},$=function(){var t="ic_postcode.png";return"Train Station"==a?t="ic_britishrail.png":"Bus Stop"==a?t="ic_bus.png":"Hail and Ride"==a?t="ic_hailandride.png":"River Boat"==a?t="ic_riverboat.png":"Tube Station"==a&&("bakerloo"==s?t="ic_bakerloo.png":"central"==s?t="ic_central.png":"circle"==s?t="ic_circle.png":"district"==s?t="ic_district.png":"hammersmith-city"==s?t="ic_hammersmithcity.png":"jubilee"==s?t="ic_jubilee.png":"metropolitan"==s?t="ic_metropolitan.png":"northern"==s?t="ic_northern.png":"piccadilly"==s?t="ic_piccadilly.png":"victoria"==s?t="ic_victoria.png":"dlr"==s?t="ic_dlr.png":"waterloo-city"==s&&(t="ic_dlr.png")),t},x=function(){var t;return"Train Station"===a?t="xs"==shaustuff.getDeviceSize()||"sm"==shaustuff.getDeviceSize()?"http://m.nationalrail.co.uk/pj/ldbboard/dep/"+o:"http://ojp.nationalrail.co.uk/service/ldbboard/dep/"+o:"Bus Stop"===a?t="http://m.countdown.tfl.gov.uk/arrivals/"+o:"Hail and Ride"===a?t="http://m.countdown.tfl.gov.uk/arrivals/"+o:"River Boat"===a?t="http://m.countdown.tfl.gov.uk/arrivals/"+o:"Tube Station"===a&&(t="https://tfl.gov.uk/tube/timetable/"+s+"?FromId="+o),t};return{getGeometryId:c,setGeometryId:l,setLat:u,getLat:p,setLng:g,getLng:d,setMarker:f,getMarker:h,getStopType:m,setStopType:v,getStopName:y,setStopName:S,getStopRoute:b,setStopRoute:w,getStopId:_,setStopId:k,getIconKey:$,getLinkUrl:x}},v=function(){n={},y("ic_britishrail.png"),y("ic_bus.png"),y("ic_hailandride.png"),y("ic_riverboat.png"),y("ic_bakerloo.png"),y("ic_central.png"),y("ic_circle.png"),y("ic_district.png"),y("ic_hammersmithcity.png"),y("ic_jubilee.png"),y("ic_metropolitan.png"),y("ic_northern.png"),y("ic_piccadilly.png"),y("ic_victoria.png"),y("ic_dlr.png"),y("ic_postcode.png")},y=function(t){var e="/images/",i=new Image;i.onload=function(){n[t]=i},i.src=e+t};return{initGMap:r,search:d,closeSearchResults:h,findOnMap:f}}();
var shauGL=function(){var t,e,r,i,n,o,a,f,u,l,m,c=1,A=1,R=1,E=0,h=0,T=[],g="/html/home.html",U=function(t){g=t},b=function(r,i,n){c=r/255,A=i/255,R=n/255,t=document.getElementById("glcanvas"),d(t),e&&(e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),F(),x(),s(),setInterval(_,15))},d=function(){e=null;try{e=t.getContext("experimental-webgl")}catch(r){location.replace("/html/oldbrowser.html")}e||location.replace("/html/oldbrowser.html")},x=function(){m=[-5,-5,-5,1],r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r);var t=[-1,1,1,1,1,1,1,3,1,-1,3,1,-1,1,-1,-1,3,-1,1,3,-1,1,1,-1,-1,3,-1,-1,3,1,1,3,1,1,3,-1,1,1,-1,1,3,-1,1,3,1,1,1,1,-1,1,-1,-1,1,1,-1,3,1,-1,3,-1,-3,-1,1,-1,-1,1,-1,1,1,-3,1,1,-3,-1,-1,-3,1,-1,-1,1,-1,-1,-1,-1,-3,1,-1,-3,1,1,-1,1,1,-1,1,-1,-3,-1,-1,-1,-1,-1,-1,-1,1,-3,-1,1,-3,-1,-1,-3,-1,1,-3,1,1,-3,1,-1,-1,-3,1,1,-3,1,1,-1,1,-1,-1,1,-1,-3,-1,-1,-1,-1,1,-1,-1,1,-3,-1,-1,-3,-1,1,-3,-1,1,-3,1,-1,-3,1,1,-3,-1,1,-1,-1,1,-1,1,1,-3,1,-1,-3,-1,-1,-3,1,-1,-1,1,-1,-1,-1,1,-1,1,3,-1,1,3,1,1,1,1,1,1,-1,-1,1,1,-1,3,1,-1,3,-1,-1,1,1,-1,1,1,1,3,1,1,3,1,-1,1,-1,-1,3,-1,-1,3,-1,1,1,-1,1,3,-1,-1,3,1,-1,3,1,1,3,-1,1,-1,-1,3,1,-1,3,1,1,3,-1,1,3,-1,1,1,-1,1,3,1,1,3,1,1,1,-1,-1,1,1,-1,1,1,-1,3,-1,-1,3,1,-1,1,1,1,1,1,1,3,1,-1,3,-1,-1,1,-1,-1,3,-1,1,3,-1,1,1,-1,-1,-3,-1,1,-3,1,1,-3,1,-1,-3,-1,1,-3,-1,1,-1,1,1,-1,1,1,-3,-1,-1,-3,1,-1,-3,1,-1,-1,-1,-1,-1,1,-1,-3,1,1,-3,1,1,-1,1,-1,-1,-1,-1,-3,-1,-1,-1,-1,1,-1,-1,1,-3];e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),cubeVerticesNormalBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,cubeVerticesNormalBuffer);var o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i);var a=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1];e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),n=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n);var f=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35,36,37,38,36,38,39,40,41,42,40,42,43,44,45,46,44,46,47,48,49,50,48,50,51,52,53,54,52,54,55,56,57,58,56,58,59,60,61,62,60,62,63,64,65,66,64,66,67,68,69,70,68,70,71,72,73,74,72,74,75,76,77,78,76,78,79,80,81,82,80,82,83,84,85,86,84,86,87,88,89,90,88,90,91,92,93,94,92,94,95,96,97,98,96,98,99,100,101,102,100,102,103,104,105,106,104,106,107,108,109,110,108,110,111,112,113,114,112,114,115,116,117,118,116,118,119];e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),e.STATIC_DRAW)},s=function(){a=e.createTexture(),o=new Image,o.onload=function(){v(o,a)},o.src="/images/plus.png"},v=function(t,r){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},_=function(){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),l=makePerspective(45,48/38,.1,100),B(),D([0,0,-9]),I(),"/html/home.html"===g?C(E,[0,1,0]):"/html/form3d.html"===g?C(-E,[0,1,1]):"/html/shaujulia.html"===g?C(E,[1,1,1]):"/html/shauvt.html"===g?C(E,[1,1,0]):"/html/map.html"===g?C(E,[1,0,1]):"/html/links.html"===g?C(-E,[1,1,1]):C(E,[0,1,0]),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(u.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,i),e.vertexAttribPointer(u.textureCoordAttribute,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,cubeVerticesNormalBuffer),e.vertexAttribPointer(u.vertexNormalAttribute,3,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(e.getUniformLocation(u,"uSampler"),0),e.uniform1i(u.useLightingUniform,!0),e.uniform3f(u.ambientColorUniform,.25,.25,.45);var t=[5,5,5],o=vec3.create();vec3.normalize(t,o),vec3.scale(o,-1),e.uniform3fv(u.lightingDirectionUniform,o),e.uniform3f(u.directionalColorUniform,5,5,5),e.uniform3f(u.pointLightingLocationUniform,m[0],m[1],m[2]),e.uniform3f(u.pointLightingColorUniform,c,A,R),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),P(),e.drawElements(e.TRIANGLES,180,e.UNSIGNED_SHORT,0),S();var f=(new Date).getTime();if(h){var T=f-h;E+=30*T/1e3;var U=mat4.create();mat4.identity(U),mat4.rotate(U,Math.PI/90,[1,0,1]),mat4.multiplyVec3(U,m,m)}h=f},F=function(){var t=L(e,"shader-fs"),r=L(e,"shader-vs");u=e.createProgram(),e.attachShader(u,r),e.attachShader(u,t),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)||alert("Unable to initialize the shader program."),e.useProgram(u),u.vertexPositionAttribute=e.getAttribLocation(u,"aVertexPosition"),e.enableVertexAttribArray(u.vertexPositionAttribute),u.textureCoordAttribute=e.getAttribLocation(u,"aTextureCoord"),e.enableVertexAttribArray(u.textureCoordAttribute),u.vertexNormalAttribute=e.getAttribLocation(u,"aVertexNormal"),e.enableVertexAttribArray(u.vertexNormalAttribute),u.ambientColorUniform=e.getUniformLocation(u,"uAmbientColor"),u.lightingDirectionUniform=e.getUniformLocation(u,"uLightingDirection"),u.directionalColorUniform=e.getUniformLocation(u,"uDirectionalColor"),u.pointLightingLocationUniform=e.getUniformLocation(u,"uPointLightingLocation"),u.pointLightingColorUniform=e.getUniformLocation(u,"uPointLightingColor")},L=function(t,e){var r=document.getElementById(e);if(!r)return null;for(var i="",n=r.firstChild;n;)3==n.nodeType&&(i+=n.textContent),n=n.nextSibling;var o;if("x-shader/x-fragment"==r.type)o=t.createShader(t.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=r.type)return null;o=t.createShader(t.VERTEX_SHADER)}return t.shaderSource(o,i),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)?o:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(o)),null)},B=function(){f=Matrix.I(4)},p=function(t){f=f.x(t)},D=function(t){p(Matrix.Translation($V([t[0],t[1],t[2]])).ensure4x4())},P=function(){var t=e.getUniformLocation(u,"uPMatrix");e.uniformMatrix4fv(t,!1,new Float32Array(l.flatten()));var r=e.getUniformLocation(u,"uMVMatrix");e.uniformMatrix4fv(r,!1,new Float32Array(f.flatten()));var i=f.inverse();i=i.transpose();var n=e.getUniformLocation(u,"uNormalMatrix");e.uniformMatrix4fv(n,!1,new Float32Array(i.flatten()))},I=function(t){t?(T.push(t.dup()),f=t.dup()):T.push(f.dup())},S=function(){if(!T.length)throw"Can't pop from an empty matrix stack.";return f=T.pop()},C=function(t,e){var r=t*Math.PI/180,i=Matrix.Rotation(r,$V([e[0],e[1],e[2]])).ensure4x4();p(i)};return{init:b,setCurrentPage:U}}();
var shaustuff=function(){var t,e,a,n,o="lg",l="/html/home.html",r=function(){s()||location.replace("/html/oldbrowser.html"),o=$("#device-size").find("div:visible").first().attr("id");var t=sessionStorage.getItem("CURRENT_PAGE");null!==t&&(l=t),c(l),m()},s=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},i=function(){return o},m=function(){t=$("#csscolour").val(),e=$("#cssred").val(),a=$("#cssgreen").val(),n=$("#cssblue").val(),u(),setLogoColour(),shauGL.init(e,a,n)},c=function(t){"/html/home.html"!==t&&"/html/home.html"===l&&shauslider.stopSlideshowThread(),sessionStorage.setItem("CURRENT_PAGE",t),l=t,$("#content").load(t),h(t),shauGL.setCurrentPage(t)},u=function(){var o=document.getElementById("hsmapcanvas"),l=o.getContext("2d"),r=document.getElementById("hsgradientcanvas"),s=r.getContext("2d"),i=document.getElementById("colourbutton"),m=document.getElementById("colourvalue"),c=new Image;c.onload=function(){l.drawImage(c,0,0)},c.src="/images/hs.png",d(s,t),g(m,i,t),o.onmousedown=function(t){var r,c,u=o.getBoundingClientRect();r=t.clientX-u.left,c=t.clientY-u.top;var h=l.getImageData(r,c,1,1).data,f=v(h[0],h[1],h[2]);e=h[0],a=h[1],n=h[2],d(s,f),g(m,i,f)},r.onmousedown=function(t){var o,l,c=r.getBoundingClientRect();o=t.clientX-c.left,l=t.clientY-c.top;var u=s.getImageData(o,l,1,1).data,d=v(u[0],u[1],u[2]);e=u[0],a=u[1],n=u[2],g(m,i,d)}},d=function(t,e){var a=t.createLinearGradient(0,0,0,50);a.addColorStop(0,"white"),a.addColorStop(.5,e),a.addColorStop(1,"black"),t.fillStyle=a,t.fillRect(0,0,15,50)},g=function(t,e,a){e.style.background=a,t.value=a},v=function(t,e,a){for(var n="#",o=t.toString(16),l=e.toString(16),r=a.toString(16);o.length<2;)o="0"+o;for(;l.length<2;)l="0"+l;for(;r.length<2;)r="0"+r;return n+=o+l+r};this.setLogoColour=function(){var t=document.getElementById("shaulogocanvas"),o=t.getContext("2d"),l=new Image;l.onload=function(){o.drawImage(l,0,0,350,90);for(var t=o.getImageData(0,0,350,90),r=t.data.length,s=0;r>s;s+=4)t.data[s]>140&&t.data[s+1]>140&&t.data[s+2]>140&&(t.data[s]=e,t.data[s+1]=a,t.data[s+2]=n);o.putImageData(t,0,0)},l.src="/images/wabbit.png"};var h=function(t){$("#menuHome").removeAttr("class"),$("#menuForm3D").removeAttr("class"),$("#menuJuliaSet").removeAttr("class"),$("#menuVirtualTrigger").removeAttr("class"),$("#menuMap").removeAttr("class"),$("#menuLinks").removeAttr("class"),"/html/home.html"===t?$("#menuHome").attr("class","active"):"/html/form3d.html"===t?$("#menuForm3D").attr("class","active"):"/html/shaujulia.html"===t?$("#menuJuliaSet").attr("class","active"):"/html/shauvt.html"===t?$("#menuVirtualTrigger").attr("class","active"):"/html/map.html"===t?$("#menuMap").attr("class","active"):"/html/links.html"===t&&$("#menuLinks").attr("class","active")},f=function(){var t=$("#colourvalue").val(),e="/updatecss?colourvalue="+encodeURIComponent(t);window.location=e};return{loadContent:c,initialiseSite:r,updateSiteCss:f,getDeviceSize:i}}();
